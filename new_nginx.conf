
worker_processes  4;

events {
    worker_connections  1024;
}

http {

    upstream youth-practice-gateway{
     server 10.62.131.84:8080;
     server 10.62.131.85:8080;
     server 10.62.131.86:8080;
     server 10.62.131.87:8080;
     server 10.62.131.88:8080;
   }
    server_tokens off;
    include       mime.types;
    default_type  application/octet-stream;
    
    proxy_buffer_size  64k;
    proxy_buffers   32 64k;
    proxy_busy_buffers_size 128k;
    sendfile on;
    keepalive_timeout  65;
	large_client_header_buffers 4 4m;
	client_header_buffer_size 5m;
    client_max_body_size 60m;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '[$upstream_response_time]-[$request_time] $status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
	# 日志策略
	map $time_iso8601 $logdate {
    '~^(?<ymd>\d{4}-\d{2}-\d{2})' $ymd;
    default    'date-not-found';
	}

	access_log /usr/local/nginx/logs/access-$logdate.log  main;
	error_log /usr/local/nginx/logs/error.log;

	server {
        listen       10301;
        server_name  127.0.0.1;
        client_max_body_size 100M;
        client_body_buffer_size 100M;  
		
		add_header X-Frame-Options ALLOWALL;
		#add_header X-Frame-Options SAMEORIGIN;
        #减少点击劫持
        #add_header X-Frame-Options DENY;

		#防XSS攻击
		add_header X-XSS-Protection "1; mode=block";
		add_header Strict-Transport-Security max-age=63072000;
		#禁止服务器自动解析资源类型
		add_header X-Content-Type-Options nosniff;
		
		
		location /gfdn/onehelp-java/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.38:8077/;
        }
		
        location /gfdn/file/ {
             proxy_http_version 1.1;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header   Host    $host;
             proxy_set_header Connection "upgrade";
             proxy_pass http://127.0.0.1:8088/;
        }
	}

    server {
        listen       80;
        server_name  127.0.0.1;
        large_client_header_buffers 4 4m;
        client_header_buffer_size 5m;
        client_max_body_size 160m;

        add_header X-Frame-Options ALLOWALL;
		#add_header X-Frame-Options SAMEORIGIN;
        #减少点击劫持
        #add_header X-Frame-Options DENY;

		#防XSS攻击
		add_header X-XSS-Protection "1; mode=block";
		add_header Strict-Transport-Security max-age=63072000;
		#禁止服务器自动解析资源类型
		add_header X-Content-Type-Options nosniff;
		
		
        if ($time_iso8601 ~ "^(d{4})-(d{2})-(d{2})") {
          set $year $1;
          set $month $2;
          set $day $3;
        }
	
	# 共富大脑数仓
	location /gfdn/bigdata {
	    alias /home/micros/bigdata/dist;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
	}
        # 青实践-系统升级状态校验
        location /gfdn/micros/practice/check-update/version.json {
          add_header 'Access-Control-Allow-Origin' '*';
          add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS'; 
          add_header 'Access-Control-Max-Age' 86400;
          add_header 'Access-Control-Allow-Headers' 'Accept,Cache-Control,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Requested-With,Origin,Content-TypeX-Auth-Token,Pragma,Expires';
            if ($request_method = 'OPTIONS') {
                return 200; 
            }
            alias /home/micros/web/practice/version.json;
        }
        # 微服务后台地址
        location /gfdn/micros/ {
          add_header 'Access-Control-Allow-Origin' "$http_origin";
          add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS'; 
          add_header 'Access-Control-Allow-Headers' 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,token,platform,Set-Cookie,Cookie'; 
            if ($request_method = 'OPTIONS') {
                return 204; 
            }
             proxy_http_version 1.1;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
             proxy_pass http://127.0.0.1:8080/;
        }
        
        location /gfdn/farm_gntx/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.49.182.5/farm_gntx/;
        }

        location /gfdn/farm_ggtx/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.49.182.5/farm_ggtx/;
        }

        location /gfdn/ds/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.49.182.5/ds/;
        }

        location /gfdn/rd/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.66/rd/;
        }

        location /gfdn/geoserver/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.49.182.5/geoserver/;
        }

        #oss文件服务器
        location /gfdn/oss/ {
             proxy_http_version 1.1;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header   Host    $host;
             proxy_set_header Connection "upgrade";
             proxy_pass http://10.62.131.36:9000/;
        }
        
        #临时文件服务器浏览
        location /gfdn/minio/view/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.36:9000/;
        }

        location /gfdn/file/ {
            if ($request_method = 'OPTIONS') {
                add_header 'Access-Control-Allow-Origin' '*';
                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS'; 
                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization,token'; 
                add_header 'Access-Control-Allow-Credentials' true;
                add_header 'Access-Control-Max-Age' 86400;
                return 204; 
            }
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header   Host    $host;
            proxy_set_header Connection "upgrade";
            proxy_pass http://127.0.0.1:8088/;
        }

        location /gfdn/user/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://127.0.0.1:8018/;
        }
        
        location /gfdn/bank/ {
        	proxy_http_version 1.1;
        	proxy_set_header Upgrade $http_upgrade;
        	proxy_set_header Connection "upgrade";
        	proxy_pass http://127.0.0.1:8080/melon/melonFarmer/;
            
        }

        location /gfdn/system/ {
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			proxy_pass http://127.0.0.1:8019/system/;

        }
		
		#iRS接口
        location /gfdn/irs/ {
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			proxy_pass http://10.62.131.38:8610/;

        }

	    location /gfdn/melonFarmer/ {
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			proxy_pass http://127.0.0.1:8080/melon/melonFarmer/;

        }

        location /gfdn/melon/farmer/service/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://127.0.0.1:8611/;
        }
		
		location /gfdn/abc/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://127.0.0.1:8028/;
        }

        #人大提案系统
        location /gfdn/proposal{
            alias  /home/micros/web/gov-proposal/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

        #电子围栏
        location /gfdn/stream/web {
            alias /home/gfdn/people-stream/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

        #电子围栏管理后台
        location /gfdn/stream/manager/ {
            alias /home/gfdn/people-manager/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
        	 
        location /gfdn/melon/farmer/screen {
        	alias  /home/melonfarmer/screen/dist/;
        	proxy_set_header  X-Real-IP  $remote_addr;
        	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        	#autoindex on;
        	index  index.html;
        	try_files $uri $uri/ /index.html last;
        }

		location /gfdn/religiomap/screen {
			alias  /home/religiomap/screen/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		location /gfdn/bank/screen {
			alias  /home/gfdn/prosperity-bank-html/screen/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}

		location /gfdn/microsweb/ {
			alias  /home/micros/web/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		location /gfdn/html/ {
			alias  /home/micros/web/html/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		location /gfdn/bank/yitong {
			alias  /home/gfdn/prosperity-bank-html/front/build/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}

		location /gfdn/portal-web/ {
			alias  /home/gfdn/portal-web/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
       	location /gfdn/nacos/ {
            proxy_http_version 1.1;
	        set $a 0;
	        #杭州公司ip
	        if ($http_x_forwarded_for = 39.170.57.63) {
                set $a 1;
	        }
	        #台州公司ip
            if ($http_x_forwarded_for = 10.76.51.18) {
                set $a 1;
            }
	        #台州公司ip
            if ($http_x_forwarded_for = 39.171.88.129) {
                set $a 1;
            }
            #台州公司ip
            if ($http_x_forwarded_for = 39.175.66.167) {
                set $a 1;
            }
            
            if ($a != 1){
                return 403 "拒绝访问";
            }
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://127.0.0.1:8848/nacos/;
        }

        # 代理民宗统一平台nacos
        location /gfdn/national/nacos {
          proxy_pass http://10.62.131.66/rd/nacos/national;
        }

	    # 代理民宗健康检查
        location /gfdn/national/view {
            proxy_pass http://10.62.131.66/rd/gfdn/view;
        }

       #通用健康地址
        location /gfdn/health/ {
		    default_type text/html;
            alias   /home/micros/web/healthAdd/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

        location /gfdn/nationalhtml {
            alias   /home/workspace/national-religion/html/huangyan/dist;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }


		location /gfdn/minzong/mainApp  {
            proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
            add_header 'Access-Control-Allow-Origin' "$http_origin";
            add_header Access-Control-Allow-Credentials 'true';
            add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie';
            alias   /home/workspace/national-religion/html/mainApp/dist;
            index index.html;
            try_files $uri $uri/ /gfdn/minzong/mainApp/index.html;
        }

		location /minzong/mainApp  {
            proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
            add_header 'Access-Control-Allow-Origin' "$http_origin";
            add_header Access-Control-Allow-Credentials 'true';
            add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie';
            alias   /home/workspace/national-religion/html/mainApp/dist;
            index index.html;
            try_files $uri $uri/ /gfdn/minzong/mainApp/index.html;
        }
				
		location /gfdn/minzong/manageSystem {
            proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
            add_header 'Access-Control-Allow-Origin' "$http_origin";
            add_header Access-Control-Allow-Credentials 'true';
            add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie';
            alias  /home/workspace/national-religion/html/manageSystem/dist;
            index index.html;
            try_files $uri $uri/ /gfdn/minzong/manageSystem/index.html;
        }

		location /gfdn/minzong/paiweiManage {
                proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
                add_header 'Access-Control-Allow-Origin' "$http_origin";
                add_header Access-Control-Allow-Credentials 'true';
                add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie';
                alias  /home/workspace/national-religion/html/paiweiManage/dist;
                index index.html;
                try_files $uri $uri/ /gfdn/minzong/paiweiManage/index.html;
        }

        # 黄岩排位页面
		location /gfdn/minzong/paiweiSystem {
            proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
            add_header 'Access-Control-Allow-Origin' "$http_origin";
            add_header Access-Control-Allow-Credentials 'true';
            add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie';
            alias  /home/workspace/national-religion/html/paiweiSystem/dist;
            index index.html;
            try_files $uri $uri/ /gfdn/minzong/paiweiSystem/index.html;
        }

		#共富大脑黄岩民宗海康图片转发
		location /gfdn/hik/pic/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass https://172.26.106.246:443/;
        }

		#代理黄岩民宗转发39政务数据平台
		location /gfdn/hymz/agent {
			proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass https://interface.zjzwfw.gov.cn/gateway/component/routing/agent.htm;
		}

        location /gfdn/ghsflv {
		     add_header Access-Control-Allow-Origin *;
	         add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
	         add_header Access-Control-Allow-Credentials true;
             proxy_pass  http://10.62.131.38:8001/;
        } 
		
		location /gfdn/global-area-mapv3/ {
		     add_header Access-Control-Allow-Origin *;
	         add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
	         add_header Access-Control-Allow-Credentials true;
             proxy_pass  http://10.62.131.38:8581/;
        }

		location /gfdn/global-area-mapv3-1013/ {
		    proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.38:8582/;
        } 
		#共富大脑黄岩民宗海康监控转发
        location /gfdn/hik/video/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://172.26.106.245:83/;
        }


		#共富大脑黄岩民宗接口转发
        location /gfdn/mingzong/crowdPerception/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://gfdn.zjhy.gov.cn/gfdn/crowdPerception/;
        }

		#共富大脑电子围栏接口转发
		#共富大脑黄岩民宗接口转发
        location /gfdn/mingzong/ytapi/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass https://efence.ytbig.cn/;
        }

		#共富大脑黄岩民宗测试
        location /gfdn/test/ {
            proxy_http_version 1.1;
            proxy_read_timeout 3000s;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.39/gfdn/test/;
        }

		#青实践给浙青链统计
                location /gfdn/youth-practice/synch/ {
                        proxy_http_version 1.1;
			proxy_read_timeout 3000s;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://10.62.131.58:8088/;

                }

		#青实践给浙青链统计
                location /gfdn/youth-practice/zql/ {
                        proxy_http_version 1.1;
			proxy_read_timeout 3000s;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://10.62.131.58:8099/;

                }
				
		#共富大脑黄岩民宗预警接口转发
                location /gfdn/mingzong/national/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass https://dingoa.zjhy.gov.cn/gfdn/national/;

                }

        #黄岩民宗大屏
		location /gfdn/minzong/hymap {
                        proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
                       add_header 'Access-Control-Allow-Origin' "$http_origin";
                       add_header Access-Control-Allow-Credentials 'true';
                       alias  /home/workspace/national-religion/html/hymap/dist;
                       index index.html;
                       #try_files $uri $uri/ /gfdn/minzong/hymap/index.html;
			try_files $uri $uri/ /index.html;

         }
        #民宗报表大屏
		location /gfdn/minzong/report {
                        proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
                       add_header 'Access-Control-Allow-Origin' "$http_origin";
                       add_header Access-Control-Allow-Credentials 'true';
                       alias  /home/workspace/national-religion/html/report/dist;
                       index index.html;
                       #try_files $uri $uri/ /gfdn/minzong/report/index.html;
			try_files $uri $uri/ /index.html;

         }
 		location /gfdn/minzong/huangyan-web {
                        proxy_cookie_path ~/(.*) ";Secure;SameSite=None;";
                       add_header 'Access-Control-Allow-Origin' "$http_origin";
                       add_header Access-Control-Allow-Credentials 'true';
                       alias  /home/workspace/national-religion/html/huangyan-web/dist;
                       index index.html;
                       try_files $uri $uri/ /gfdn/minzong/huangyan-web/index.html;
						
                }           

        # 民宗统一平台
		location /gfdn/national/ {
			add_header Access-Control-Allow-Origin '*';
			add_header Access-Control-Allow-Credentials 'true';
			add_header Access-Control-Allow-Methods 'POST, GET, PUT, OPTIONS, DELETE, PATCH';
			add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie,mark,token,authorization,cookie';
			# proxy_pass http://10.62.131.39:9999/;
			proxy_pass http://10.62.131.39/gfdn/national/;
            if ($request_method = 'OPTIONS') {
                return 204;
            }
		}


        location / {
            root   html;
            index  index.html index.htm;
        }

	    location /gfdn/images {
             root   /home/;
             autoindex on;
        }
		
		#幸福安家后台图片转发
		location /gfdn/happiness/assets/{
		     alias /home/gfdn/prosperity-happiness/assets/;
			 autoindex on;
        }
        #幸福安家登录接口转发
        location /gfdn/user/ding/happiness/getUserInfo {
            add_header 'Access-Control-Allow-Origin' "$http_origin";
			add_header Access-Control-Allow-Credentials 'true';
			add_header Access-Control-Allow-Methods 'POST, GET, PUT, OPTIONS, DELETE, PATCH';
			add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie,mark,token,authorization,cookie';
            if ($request_method = 'OPTIONS') {
                return 204;
            }
             proxy_http_version 1.1;
             proxy_set_header Upgrade $http_upgrade;
        	 proxy_set_header Connection "upgrade";
             proxy_pass http://127.0.0.1:8080/user/ding/happiness/getUserInfo;
        }
        location /gfdn/happiness-map/ {
			 proxy_http_version 1.1;
			 proxy_set_header Upgrade $http_upgrade;
			 proxy_set_header Connection "upgrade";
			 proxy_pass http://127.0.0.1:8501/;
        }
		#幸福安家后台接口
		location /gfdn/happiness/ {
			add_header Access-Control-Allow-Origin "$http_origin";
			add_header Access-Control-Allow-Credentials 'true';
			add_header Access-Control-Allow-Methods 'POST, GET, PUT, OPTIONS, DELETE, PATCH';
			add_header Access-Control-Allow-Headers 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Mx-ReqToken,X-Requested-With,authorization,Set-Cookie,Cookie,mark,token,authorization,cookie';
            if ($request_method = 'OPTIONS') {
                return 204;
            }
			 proxy_http_version 1.1;
			 proxy_set_header Upgrade $http_upgrade;
			 proxy_set_header Connection "upgrade";
			 proxy_pass http://127.0.0.1:8080/happiness/;
		}
		
		#幸福安家浙政钉前端-PC端
		location /gfdn/happiness/admin {
			alias /home/gfdn/prosperity-happiness/web/pc/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		#幸福安家浙政钉前端-APP端
		location /gfdn/happiness/app {
			alias /home/gfdn/prosperity-happiness/web/app/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			#autoindex on;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		} 

		#小橘灯H5前端
		location /gfdn/xiaojudengh5/ {
			alias /home/gfdn/xiaojudeng/h5/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		
		#小橘灯后台前端
		location /gfdn/xiaojudeng/ {
			alias /home/gfdn/xiaojudeng/manage/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		#小橘灯后台接口
		location /gfdn/xiaojudeng_java/ {
			 proxy_http_version 1.1;
			 proxy_set_header Upgrade $http_upgrade;
			 proxy_set_header Connection "upgrade";
			 proxy_pass http://127.0.0.1:8084/;
		}
		location /gfdn/proposal/files{
			 proxy_http_version 1.1;
			 proxy_set_header Upgrade $http_upgrade;
			 proxy_set_header Connection "upgrade";
			 proxy_pass http://10.62.131.38:80/gfdn/proposal/files;
		
		}
		
		location /gfdn/stream_java/ {
			 add_header Access-Control-Allow-Origin *;
			 add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
			 add_header Access-Control-Allow-Credentials true;
			 proxy_pass  http://10.62.131.38:9100/;
		}
		
		location /gfdn/global-area-operate/ {
			 add_header Access-Control-Allow-Origin *;
			 add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
			 add_header Access-Control-Allow-Credentials true;
			 proxy_pass  http://10.62.131.38:8540/;
		}

        #人大提案              
		location /gfdn/proposal_java/{
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			proxy_pass http://10.62.131.38:9001/;
		} 

		#大网格（椒江）后台接口            
		location /gfdn/bigNet-java/{
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			proxy_pass http://10.62.131.38:8311/;
		} 
		

		#大网格（椒江）前端
		location /gfdn/bigNet/ {
			alias /home/workspace/bigNet/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
        #一体帮扶图片转发
		location /gfdn/helpweb{
		     alias  http://10.62.131.37;
			 autoindex on;
        }
		#一体帮扶后端（可夸域）
		location /gfdn/onehelp-java/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.38:8077/;
        }
		
		
		#一体化帮扶web前端(共富)
		location /gfdn/onehelp/ {
			alias /home/gfdn/onehelp/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}
		
		#一体化帮扶web前端(大屏)
		location /gfdn/onehelp-map/ {
			proxy_pass http://10.62.131.36/full-screen/hyFull/;
		}
		
		#一体化帮扶绿城前端(共富)
		location /gfdn/gtonehelp/ {
			alias /home/gfdn/onehelp/gt/dist/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		}

		#一体化帮扶web前端(乐一)
		location /gfdn/lyonehelp {
			 #return 404;
                         proxy_pass http://10.62.131.36/lyonehelp_vue;
                         #try_files $uri $uri/ /index.html;
			 #try_files $uri $uri/ /index.html last;
		}
		
		#一体化帮扶后端接口保存的图片
		location /gfdn/lyonehelp_java/uploads/ {
			 proxy_pass http://10.62.131.36/uploads/;
		}
		
		#一体化帮扶后端接口(乐一)
		location /gfdn/lyonehelp_java/ {
			client_max_body_size 60M;
			proxy_pass http://10.62.131.36/lyonehelp_java/;
		}
		
		#幸福安家大屏前段
		location /gfdn/prosperity-happiness-map/ {
			alias /home/gfdn/prosperity-happiness-map/web/;
			proxy_set_header  X-Real-IP  $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			index  index.html;
			try_files $uri $uri/ /index.html last;
		} 
		
		#幸福安家大屏后台
		location /gfdn/prosperity-happiness-map_java/ {
			 proxy_http_version 1.1;
			 proxy_set_header Upgrade $http_upgrade;
			 proxy_set_header Connection "upgrade";
			 proxy_pass http://127.0.0.1:8501/;
		} 	
		
		#共富微服务-全域协作-浙政钉App前端
        location /gfdn/microsweb/global-area/app/ {
            alias /home/micros/web/global-area/application/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
		
		#共富微服务-全域协作-驾驶2
        location /gfdn/microsweb/global-area-rich-map/ {
            alias /home/micros/web/global-area/map-v2/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
				
		#共富微服务-工坊大屏-驾驶v3
        location /gfdn/microsweb/global-area-mapv3/ {
            alias /home/micros/web/global-area/map-v3/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
		#共富微服务-工坊大屏-驾驶v3-1013
        location /gfdn/microsweb/global-area-mapv3-1013/ {
            alias /home/micros/web/global-area/map-v3-1013/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
		
		#乡贤带富管理端-前端
        location /gfdn/microsweb/villager-richer/ {
            alias /home/micros/web/villager-richer/admin/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
			
		#乡贤带富驾驶舱-前端
        location /gfdn/microsweb/villager-richer-map/ {
            alias /home/micros/web/villager-richer/map/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
       #乡贤带富APP端-前端（浙里办端-临时）
        location /gfdn/microsweb/villager-richer-zlb/ {
            alias /home/micros/web/villager-richer/zlb/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }			
		
		#共富微服务-全域协作-钉PC前端
        location /gfdn/microsweb/global-area/ {
            alias /home/micros/web/global-area/computer/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
				
		#共富微服务-共富工坊-全域协作-运营端前端
        location /gfdn/microsweb/global-area-operate/ {
            alias /home/micros/web/global-area/operate/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
        #共富微服务-全域协作h5端
        location /gfdn/microsweb/global-area-h5/ {
            alias  /home/micros/web/global-area/h5/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
        #共富微服务-全域协作-浙政钉登录接口转发
        location /gfdn/micros/global-area/login {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            client_max_body_size 100m;
            proxy_pass http://127.0.0.1:8080/auth/global-area/login;
        }

        #共富微服务-全域协作PC前端
        location /gfdn/microsweb/global-area-manager/ {
            alias  /home/micros/web/global-area/manager/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
        #共富微服务-全域协作PC前端
        location /gfdn/global-area/map/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            client_max_body_size 100m;
            proxy_pass http://gfdn.zjhy.gov.cn/gfdn/global-area/map/;
        }
        #共富微服务-全域协作PC前端
        location /gfdn/global-area/map2/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            client_max_body_size 100m;
            proxy_pass http://10.62.131.38/gfdn/global-area/map/;
        }		
		
		#瓜农天下大屏（2）
        location /gfdn/gn-map/ {
            alias  /home/gfdn/gn-map/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
        
		#青实践企业Web端
        location /gfdn/practice/company/web/ {
            alias /home/micros/web/practice/company_web/;
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		#共富微服务浙政钉-青实践浙政钉Web前端

        location /gfdn/practice/web/ {
           return 302 https://ding.etz.gov.cn:8069/web/mgop/gov-open/zj/20016710/reserved/index.html;
        }
        
		#郑鸿杰用
		location /gfdn/389002/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.38:9002/;
        }
		
		
        #共富微服务-青实践浙政钉App前端
        location /gfdn/practice/app/ {
            alias  /home/micros/web/practice/app/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
		
		#青实践大屏前端
        location /gfdn/map/practice/web/ {
            alias  /home/micros/practice-map/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

		#青实践大屏前端
        location /gfdn/youth-practice/h5/ {
            alias  /home/micros/youth-practice/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

        #青实践app接口
        location /gfdn/youth-practice/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            #proxy_pass http://10.62.131.57:8080/;
            proxy_pass http://youth-practice-gateway/;
            access_log /usr/local/nginx/logs/youth-practice/access-$logdate.log combined;
            error_log /usr/local/nginx/logs/youth-practice/error.log warn;
           #proxy_pass http://qygc.hytqw.zjhy.gov.cn/gfdn/youth-practice/;
        }
		
		#青实践大屏接口
        location /gfdn/map/practice/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.58:8351/;
        }
    
        #青实践app测试接口
        location /gfdn/youth_practice/ {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_pass http://10.62.131.59:8080/;
            #proxy_pass http://youth-practice-gateway/;
            #proxy_pass http://qygc.hytqw.zjhy.gov.cn/gfdn/youth-practice/;
        }
    
        #青实践H5页面
        location /gfdn/youthPractice/h5/ {
            alias  /home/micros/web/youth-practice/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

        #青实践（三张页面）
        location /gfdn/microsweb/3page/ {
            alias  /home/micros/web/3page/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
			
        #黄岩大数据局-防疫大屏
        location /gfdn/fy-map/ {
            alias  /home/gfdn/fy-map/dist/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }
        #E编仓后台
        location /gfdn/yongning-warehouse/java/ {
            proxy_pass http://10.62.131.38:8330/;
        }
        #E编仓前端
        location /gfdn/yongning-warehouse/web/ {
            alias  /home/monolith/yongning-warehouse/pc/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
            try_files $uri $uri/ /index.html last;
        }

	    #全域旅游海康监控请求转发
        location /gfdn/tour/hikvideo/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass https://172.18.1.40:443/;

        }

	    #全域旅游海康监控视频转发
        location /gfdn/tour/video/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://172.18.1.36:83/;

        }
        #转发基础四平台
     #   location /gfdn/tianque/ {
      #      proxy_pass http://tianque.oicp.net:17001/;
     #   }

	    #全域旅游管理后台
        location /gfdn/global-tour/admin{
            proxy_pass  http://10.62.131.80/global-tour/admin/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
         }

	    #全域旅游管理后台后端接口
        location /gfdn/global-tour-admin/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://10.62.131.80/global-tour-admin/;
        }

	    #全域旅游大屏
        location /gfdn/global-tour/map{
            proxy_pass  http://10.62.131.80/global-tour/map/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            #autoindex on;
            index  index.html;
         }

	    #全域旅游大屏后端接口
        location /gfdn/global-tour-map/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://10.62.131.80/global-tour-map/;
        }

	    #全域旅游游客h5
        location /gfdn/global-tour/app{
            proxy_pass  http://10.62.131.80/global-tour/app/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            index  index.html;
         }

	#优婚管理后台
        location /gfdn/youhun/admin{
            proxy_pass  http://10.62.131.81/youhun/admin/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            index  index.html;
         }

	#优婚app
        location /gfdn/youhun/app{
            proxy_pass  http://10.62.131.81/youhun/app/;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            index  index.html;
         }

	#优婚管理后台接口
        location /gfdn/youhun/yhtzwb/ {
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_pass http://10.62.131.81/yhtzwb/;
        }
		
		
        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }

    server {
        listen       7530;
        server_name 127.0.0.1;

        add_header X-Frame-Options ALLOWALL;
		#add_header X-Frame-Options SAMEORIGIN;
        #减少点击劫持
        #add_header X-Frame-Options DENY;

		#防XSS攻击
		add_header X-XSS-Protection "1; mode=block";
		add_header Strict-Transport-Security max-age=63072000;
		#禁止服务器自动解析资源类型
		add_header X-Content-Type-Options nosniff;
		
		# 获取防疫信息：健康码、疫苗接种信息、核酸检测信息、短信验证码、行程卡
        location /epidemicPreventionInfo {
                root html;
                proxy_set_header  X-Real-IP  $remote_addr;
                proxy_pass https://interface.zjzwfw.gov.cn/;
        }
		
		# 获取密钥
	    location /getSecret {
                root html;
                proxy_set_header  X-Real-IP  $remote_addr;
                proxy_pass http://59.202.38.178/;
        }

        location /refreshTokenByKey {
                root html;
                proxy_set_header  X-Real-IP  $remote_addr;
                proxy_pass http://59.202.38.178/;
        }

        location /refreshTokenBySec {
                root html;
                proxy_set_header  X-Real-IP  $remote_addr;
                proxy_pass http://59.202.38.178/;
        }

    }
}
